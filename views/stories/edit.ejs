<%- include('../partials/header') %>

<h2>Edit Your Story: <%=story.title%></h2>

<form action="/stories/<%=story._id%>?_method=PUT" method="POST" class="story-form" enctype="multipart/form-data">

  <label for="edit-rating"><h4>Rating</h4></label>
    <select id="edit-rating" name="rating">
      <option disabled>--SELECT RATING--</option>
      <option value="General" <%= currentRating === 'General' ? 'selected' : '' %>>General</option>
      <option value="Teen" <%= currentRating === 'Teen' ? 'selected' : '' %>>Teen</option>
      <option value="Mature" <%= currentRating === 'Mature' ? 'selected' : '' %>>Mature</option>
      <option value="Explicit" <%= currentRating === 'Explicit' ? 'selected' : '' %>>Explicit</option>
    </select>

    <label for="edit-story-warning"><h4>Warning</h4></label>
   <% warningOptions.forEach((warning) => { %>
        <label for="edit-<%=warning%>">
          <input id="edit-<%=warning%>" type="checkbox" name="warning" value="<%=warning%>"
          <%if (selectedWarnings && selectedWarnings.includes(warning)) { %>
              checked
         <% } %>
         />
         <%=warning%>
        </label>
   <% }) %>

  <% if(story.thumbnail) {%>
    <button>delete</button>
  <% } else { %>
    <label for="edit-cloudinary-image">
      Image Upload
      <input id="edit-cloudinary-image" type="file" name="imageUpload" />
  </label>
  <label for="edit-cloudinary-description">
      Image Description
      <input id="edit-cloudinary-description" type="text" name="description" />
  </label>
  <label for="edit-cloudinary-alt">
      Image Alt Text
      <input id="edit-cloudinary-alt" type="text" name="alt" />
  </label>
   <% } %>

   

    <label for="edit-summary"><h4>Summary</h4></label>
  <textarea id="edit-summary" name="summary" required><%=story.summary%></textarea>

  <label for="edit-title"><h4>Title</h4></label>
    <input id="edit-title" type="text" name="title" required value="<%=story.title%>"/>

    <label for="storytextarea"><h4>Text Editor</h4></label>
  <textarea id="storytextarea" name="content" required><%=story.content%></textarea>
  <button type="submit">Update Story</button>
</form>

<%- include('../partials/footer') %>
